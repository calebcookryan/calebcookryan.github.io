<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>caleb cook ryan</title>

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="favicon.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet">

  <!-- Leaflet (map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root { --bg:#fff; --text:#000; --border:#000; --maxw:1080px; }
    * { box-sizing:border-box; }
    html, body { margin:0; background:var(--bg); color:var(--text); font-family:'Work Sans',sans-serif; }
    .wrap { max-width:var(--maxw); margin:0 auto; padding:24px; }

    header { border-bottom:1px solid var(--border); padding:16px 0; display:flex; align-items:center; justify-content:space-between; }
    .site-title { display:flex; align-items:center; gap:10px; }
    .site-title img { width:32px; height:32px; }
    nav ul { list-style:none; display:flex; gap:20px; margin:0; padding:0; }
    nav a { text-decoration:none; color:var(--text); font-weight:700; cursor:pointer; text-transform:lowercase; }
    nav a:hover { text-decoration:underline; }

    main section { display:none; padding:24px 0; border-bottom:1px solid var(--border); }
    main section.active { display:block; }
    h1 { margin:0; font-weight:700; }
    h2, h3, h4 { margin:0 0 15px; font-weight:700; text-transform:lowercase; }

   .photo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
      gap: 16px;
      margin-top: 10px;
    }
    
    .photo {
      border: 1px solid var(--border);
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      height: 200px; /* You can adjust this as needed */
      min-height: 200px; /* Keeps consistent height across grid items */
    }
    
    .photo img {
      max-width: 100%; /* Ensure image fits inside the container */
      height: auto; /* Maintain aspect ratio */
    }

    .box { border:1px solid var(--border); padding:16px; margin:12px 0; }
    .proj-sub {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
    }
    
    .proj-sub h4 {
      font-size: 1.5rem; /* Adjustable heading size */
      margin-bottom: 10px; /* Space between the heading and content */
    }
    
    .proj-sub p {
      font-size: 1rem;
      line-height: 1.5;
      margin-bottom: 10px; /* Space between paragraphs */
    }
    
    .proj-sub .photo-grid {
      margin-top: 20px; /* Space between text and image grid */
    }
    .proj-sub h4, .research-sub h4 { margin:0 0 6px; text-transform:none; }

    .about-container { display:flex; flex-wrap:wrap; gap:24px; align-items:flex-start; }
    .about-photo { flex:1 1 300px; border:1px solid var(--border); background:#f0f0f0; display:flex; flex-direction:column; align-items:center; gap:12px; color:#666; padding:0; }
    .about-photo img { max-width: 100%; height: auto; display: block; }
    .about-text { flex:2 1 400px; }

    .cv-viewer { width:100%; height:800px; border:1px solid var(--border); }

    /* publications */
    .pubs .year { border-top:1px solid var(--border); padding-top:8px; margin-top:20px; font-weight:700; }
    .pub-list { list-style:none; padding:0; margin:8px 0 0; }
    .pub-item { margin:12px 0; }
    .pub-item .cite { display:block; text-indent:-1.5em; padding-left:1.5em; line-height:1.4; }
    .pub-item .links { display:flex; align-items:center; gap:14px; margin-top:4px; }
    .pdf-icon { width:20px; height:auto; vertical-align:middle; }

    /* contact */
    .contact { display:grid; grid-template-columns:1fr; gap:12px; }
    .contact-row { display:flex; align-items:center; gap:10px; }
    .contact .handle { font-weight:700; }
    .contact-divider { border-top:1px solid var(--border); margin:16px 0; }
    .muted { color:#333; }

    /* map box */
    #mapbox { height:420px; border:1px solid var(--border); margin-top:20px; }
  </style>
</head>
<body>
  <header class="wrap">
    <div class="site-title">
      <h1>Caleb Cook Ryan</h1>
      <img src="favicon.png" alt="Site icon">
    </div>
    <nav>
      <ul>
        <li><a href="#about">about</a></li>
        <li><a href="#research">research</a></li>
        <li><a href="#projects">projects</a></li>
        <li><a href="#publications">publications</a></li>
        <li><a href="#cv">cv</a></li>
        <li><a href="#contact">contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="wrap">
    <!-- about -->
    <section id="about" class="active">
      <h2></h2>
      <div class="about-container">
        <div class="about-photo">
          <img src="images/about_photo.jpeg" alt="Handling a bat in the field">
          <img src="images/about_photo2.jpeg" alt="Headshot">
        </div>
        <div class="about-text">
          <h3>about me</h3>
          <p>
            My name is Caleb (he/him/il/ils), and I am currently a PhD Candidate in the Department of Biology at the University of Waterloo in Canada and a Pre-Doctoral Fellow at the Smithsonian Tropical Research Institute in Panama. 
            My research broadly focuses on the social behaviour of bats. My work is strongly interdisciplinary, linking approaches from psychology, sociology, 
            and engineering to better understand bat lives.
          </p>
          <p>
            Currently, my research takes two main forms. First, I investigate how individuality and consistent behavioural differences influence the formation, 
            maintenance, and function of social relationships in bats. These studies aim to reveal how variation among individuals shapes cooperation, 
            association patterns, and information exchange within social groups. 
          </p>
          <p>
            The second part of my research focuses on using big data approaches to expand our understanding of species’ natural histories. 
            I am broadly interested in method development and the integration of technology into wildlife research. 
            Recent advances in battery technology have greatly expanded the range of hardware solutions for studying even the smallest animals. With the 
            simultaneous increase in available computing power, researchers can generate and analyze massive datasets about what animals are up to, where they 
            are going, and who they are there with, offering unprecedented insights into the details of animal lives.
          </p>
          <p>
            My work has been supported by research grants from the American Museum of Natural History, as well as funding from the Natural Sciences and Engineering 
            Research Council of Canada (NSERC) and the University of Waterloo.
          </p>
          <p>
            Outside of research, I try to spend as much time as possible outdoors—mountain biking, running, birding, or sleeping in my hammock.
          </p>
        </div>
      </div>
      <div class="contact-divider"></div>
      <div class="contact">
        <div class="contact-row"><span class="muted">email:</span> <span>c9ryan (at) uwaterloo (dot) ca</span></div>
        <div class="contact-row">
          <a href="https://github.com/calebcookryan" target="_blank" rel="noopener">github.com/<span class="handle">calebcookryan</span></a>
        </div>
        <div class="contact-row">
          <a href="https://twitter.com/CalebCRyan" target="_blank" rel="noopener">twitter.com/<span class="handle">CalebCRyan</span></a>
        </div>
        <div class="contact-row">
          <a href="https://instagram.com/calebcookryan" target="_blank" rel="noopener">instagram.com/<span class="handle">calebcookryan</span></a>
        </div>
      </div>
    </section>

    <!-- research -->
    <section id="research">
      <h2>research</h2>

      <div class="box">
        <div class="research-sub" id="res-nextgen">
          <h4>Next-generation Natural History</h4>
          <p>Using technology to study animal behaviour.</p>
          <ul>
            <li>RFID for Individual ID</li>
          </ul>
          <div class="photo-grid">
            <div class="photo">
              <img src="images/lamanai_photo.jpeg" alt="lamanai">
            </div>
            <div class="photo">
              <img src="images/lamanai_photo2.jpeg" alt="lamanai">
            </div>
            <div class="photo">
              <img src="images/lamanai_photo3.jpeg" alt="lamanai">
          </div>
        </div>

        <div class="research-sub" id="res-individuality">
          <h4>Individuality and Individual Differences</h4>
          <p>Understanding among-individual variation that shapes social structure.</p>
          <ul>
            <li>Personality</li>
            <li>In-hand aggressiveness</li>
          </ul>
          <div class="photo-grid">
            <div class="photo">photo 1</div>
            <div class="photo">photo 2</div>
          </div>
        </div>
      </div>
    </section>

    <!-- projects -->
    <section id="projects">
      <h2>projects</h2>

      <div class="box">
        <h3>on-going collaborations</h3>

        <div class="proj-sub" id="proj-belize">
          <h4>Long-term Mark Monitoring of Bats in Belize</h4>
          <p>Large collaboration with scientists from >40 institutions and 10 countries. Research supported by AMNH. Project featured by NPR.</p>
          <div class="photo-grid">
            <div class="photo">
              <img src="images/lamanai_photo.jpg" alt="lamanai">
            </div>
            <div class="photo">
              <img src="images/lamanai_photo2.jpeg" alt="lamanai">
            </div>
            <div class="photo">
              <img src="images/lamanai_photo3.jpeg" alt="lamanai">
            </div>
          </div>

        <div class="proj-sub" id="proj-panama-fringelipped">
          <h4>Social Structure and Behavioural Dynamics of Fringe-lipped Bats in Panama (2025)</h4>
          <p>Smithsonian Tropical Research Institute. Research supported by STRI fellowship and AMNH.</p>
          <div class="photo-grid">
            <div class="photo">photo 1</div>
            <div class="photo">photo 2</div>
          </div>
        </div>

        <div class="proj-sub" id="proj-jamaica-flowerbat">
          <h4>Social Structure and Movement Dynamics of the Jamaican Flower Bat</h4>
          <p>In collaboration with the University of the West Indies, Bat Conservation International, and York University.</p>
          <div class="photo-grid">
            <div class="photo">photo 1</div>
            <div class="photo">photo 2</div>
          </div>
        </div>
      </div>

      <div class="box">
        <h3>past projects</h3>

        <div class="proj-sub" id="proj-ontario-rfid">
          <h4>Long-term RFID Monitoring of Little Brown Bats in Ontario, Canada (2018–2024)</h4>
          <p>Part of my PhD research. Established long term monitoring program around maternity roosts in and around Pinery Provincial Park. In collaboration with Ontario Parks.</p>
          <div class="photo-grid">
            <div class="photo">photo 1</div>
            <div class="photo">photo 2</div>
          </div>
        </div>

        <div class="proj-sub" id="proj-eastern-canada-status">
          <h4>Assessing the Population Status of Bats in Eastern Canada (2022–2023)</h4>
          <p>Capture surveys during summer and swarming. In collaboration with University of Waterloo, Environment Climate Change Canada.</p>
          <div class="photo-grid">
            <div class="photo">photo 1</div>
            <div class="photo">photo 2</div>
          </div>
        </div>
      </div>

      <!-- Map (lazy init) -->
      <div id="mapbox"></div>
    </section>

    <!-- publications -->
    <section id="publications">
      <h2>publications</h2>
      <div class="pubs" id="pubs">loading publications…</div>
    </section>

    <!-- cv -->
    <section id="cv">
      <h2>cv</h2>
      <p><a href="caleb_cv_current.pdf" target="_blank" rel="noopener">download cv (pdf)</a></p>
      <div class="box"><h3>full cv</h3>
        <embed src="caleb_cv_current.pdf" type="application/pdf" class="cv-viewer">
      </div>
    </section>

    <!-- contact -->
    <section id="contact">
      <h2>contact</h2>
      <div class="contact">
        <div class="contact-row"><span class="muted">email:</span> <span>c9ryan (at) uwaterloo (dot) ca</span></div>
        <div class="contact-row">
          <a href="https://github.com/calebcookryan" target="_blank" rel="noopener">github.com/<span class="handle">calebcookryan</span></a>
        </div>
        <div class="contact-row">
          <a href="https://twitter.com/CalebCRyan" target="_blank" rel="noopener">twitter.com/<span class="handle">CalebCRyan</span></a>
        </div>
        <div class="contact-row">
          <a href="https://instagram.com/calebcookryan" target="_blank" rel="noopener">instagram.com/<span class="handle">calebcookryan</span></a>
        </div>
      </div>
    </section>
  </main>

  <footer class="wrap">
    <p>&copy; <span id="y"></span> Caleb Cook Ryan</p>
  </footer>

  <script>
    // footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // hash-based tabs (only one section visible)
    const allSections = Array.from(document.querySelectorAll('main section'));
    function showSection(id) {
      allSections.forEach(sec => sec.classList.toggle('active', sec.id === id));
    }

    // ---- Projects map (lazy init) ----
    let mapInitialized = false;
    function initProjectsMap(){
      if (mapInitialized || typeof L === 'undefined') return;

      // Project sites (approximate coordinates) + anchors
      const sites = [
        { name: "Belize Long-term", coords: [17.25, -88.77], anchor: "proj-belize" },
        { name: "Panama – Fringe-lipped bats (2025)", coords: [9.119, -79.704], anchor: "proj-panama-fringelipped" }, // Gamboa/STRI
        { name: "Ontario – Pinery Provincial Park", coords: [43.27, -81.83], anchor: "proj-ontario-rfid" },
        { name: "Eastern Canada – Hibernating bats", coords: [46.5, -66.5], anchor: "proj-eastern-canada-status" },
        { name: "Jamaica – Flower bat (2025)", coords: [18.1096, -77.2975], anchor: "proj-jamaica-flowerbat" }
      ];

      const map = L.map('mapbox', { scrollWheelZoom: false });
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; OpenStreetMap &copy; CARTO'
      }).addTo(map);

      const markers = sites.map(s => {
        const link = `<a href="#projects" data-anchor="${s.anchor}" class="map-link">Open details ↓</a>`;
        return L.marker(s.coords).bindPopup(`<strong>${s.name}</strong><br>${link}`);
      });
      const group = L.featureGroup(markers).addTo(map);
      map.fitBounds(group.getBounds().pad(0.2));

      // Smooth-scroll from popup links to subsection
      document.addEventListener('click', (e) => {
        const a = e.target.closest('.map-link');
        if (!a) return;
        e.preventDefault();
        const id = a.getAttribute('data-anchor');
        if (location.hash !== '#projects') {
          location.hash = '#projects';
          setTimeout(() => document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' }), 60);
        } else {
          document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });

      mapInitialized = true;
    }

    function navigate() {
      const id = (location.hash || '#about').slice(1);
      if (!document.getElementById(id)) return (location.hash = '#about');
      showSection(id);
      if (id === 'projects') initProjectsMap();
    }
    window.addEventListener('hashchange', navigate);
    document.addEventListener('DOMContentLoaded', navigate);

    // publications: Altmetric by default, PlumX if pub.plumx === true
    function normalizeMyName(html){
      return html.replace(/caleb\s+cook\s+ryan/gi, '<strong>Caleb Cook Ryan</strong>');
    }

    fetch('publication.json')
      .then(res => res.json())
      .then(data => {
        const pubs = document.getElementById('pubs');
        pubs.innerHTML = '';

        for (const yearBlock of data.years) {
          const yearDiv = document.createElement('div');
          yearDiv.className = 'year';
          yearDiv.textContent = yearBlock.year;
          pubs.appendChild(yearDiv);

          const ol = document.createElement('ol');
          ol.className = 'pub-list';

          for (const pub of yearBlock.pubs) {
            const li = document.createElement('li');
            li.className = 'pub-item';

            const cite = document.createElement('span');
            cite.className = 'cite';
            cite.innerHTML = normalizeMyName(pub.citation || '');

            const linksDiv = document.createElement('div');
            linksDiv.className = 'links';

            if (pub.pdf) {
              const a = document.createElement('a');
              a.href = pub.pdf;
              a.setAttribute('aria-label', 'PDF');
              a.innerHTML = '<img class="pdf-icon" src="favicon.png" alt="PDF">';
              linksDiv.appendChild(a);
            }

            li.appendChild(cite);
            li.appendChild(linksDiv);

            // Metrics: if pub.plumx is true, show PlumX; else Altmetric
            if (pub.plumx === true && (pub.doi || pub.pmid)) {
              const plumURL = pub.doi
                ? `https://plu.mx/plum/a/?doi=${encodeURIComponent(pub.doi)}`
                : `https://plu.mx/plum/a/?pmid=${encodeURIComponent(pub.pmid)}`;
              const plumA = document.createElement('a');
              plumA.className = 'plumx-plum-print-popup';
              plumA.setAttribute('data-popup','right');
              plumA.setAttribute('data-hide-when-empty','false');
              plumA.href = plumURL;
              plumA.textContent = 'PlumX';
              li.appendChild(plumA);
            } else if (pub.doi || pub.pmid) {
              const altDiv = document.createElement('div');
              const idAttr = pub.pmid ? `data-pmid="${pub.pmid}"` : `data-doi="${pub.doi}"`;
              altDiv.innerHTML = `<span class="altmetric-embed" data-badge-type="donut" data-hide-no-mentions="false" data-link-target="_blank" ${idAttr}></span>`;
              li.appendChild(altDiv);
            }

            ol.appendChild(li);
          }

          pubs.appendChild(ol);
        }
      });
  </script>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- Altmetric + PlumX scripts (render badges/popups) -->
  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
  <script async src="https://cdn.plu.mx/widget-popup.js"></script>
</body>
</html>


